@oui-icon-position-right: 5px;
@oui-icon-selector: oui-icon;

@oui-input-font-size: 14px;

@oui-select-font-size: 14px;
@oui-select-icon-size: 10px;
@oui-select-selector: oui-select;

@oui-checkbox-padding: calc(@oui-checkbox-size * 1.5);
@oui-checkbox-margin: calc(-@oui-checkbox-size * 1.5);

label {
    #oui > .label-normalize();
    #oui > .label-base();

    &.required::after {
        content: "*";
        color: @state-danger-text;
        margin-left: 5px;
    }
}

legend {
    font-size: 14px;
    font-weight: @oui-font-semibold;
    margin-bottom: .5em;
}

.form-control {
    box-shadow: none;
}

// Inputs, Textarea
input.form-control,
textarea.form-control {
    #oui > .input-normalize();
    #oui > .input-base();

    margin-bottom: 0;
    font-size: 16px;

    // States
    &:disabled,
    &.disabled { opacity: 1; }

    .has-success & {
        #oui > .input-variant(@state-success-text; @state-success-bg; @state-success-border);
    }

    .has-warning & {
        #oui > .input-variant(@state-warning-text; @state-warning-bg; @state-warning-border);
    }

    .has-error & {
        #oui > .input-variant(@state-danger-text; @state-danger-bg; @state-danger-border);
    }
}

textarea.form-control { resize: vertical; }

// Checkbox, Radio
input[type="radio"],
input[type="checkbox"] { margin: @padding-base-vertical 0 0 0; }

.checkbox,
.checkbox-inline,
.radio,
.radio-inline {
    &.disabled { color: @oui-color-dusty; }
}

.checkbox label,
.checkbox-inline,
.radio label,
.radio-inline {
    line-height: @oui-checkbox-line-height;
    padding-left: @oui-checkbox-padding;
    font-size: @oui-checkbox-size;
    font-weight: @oui-font-semibold;
    color: inherit;
}

.checkbox-description,
.radio-description {
    display: block;
    font-size: @font-size-base;
    font-weight: @oui-font-regular;

    .has-success & { color: @brand-success; }

    .has-warning & { color: @brand-warning; }

    .has-error & { color: @brand-danger; }
}

.checkbox,
.checkbox-inline {
    input[type="checkbox"] { margin-left: @oui-checkbox-margin; }
}

.radio,
.radio-inline {
    input[type="radio"] { margin-left: @oui-checkbox-margin; }
}

// Select
select.form-control {
    #oui > .select-normalize();
    #oui > .select-background();

    line-height: 34px;
    height: ~"calc(@{oui-select-font-size} * 2.25)";
    min-height: 36px;
    padding: 0 20px 0 @oui-select-padding;
    font-size: 16px;
    font-weight: @oui-select-font-weight;
    color: @oui-select-font-color;
    border: 1px solid @oui-select-border-color;
    background-color: #fff;
    cursor: pointer;

    -webkit-appearance: none;
       -moz-appearance: none;
        -ms-appearance: none;
            appearance: none;

    &:focus,
    &:active {
        #oui > .select-background(@oui-input-border-color-focus);

        border: 1px solid @oui-input-border-color-focus;
        outline: none;
        box-shadow: inset 1px 1px 2px 0 fade(@oui-input-border-color-focus, 50%), 0 0 3px 0 rgba(0, 0, 0, 0.35);
        background-color: @oui-input-background-color-focus;
    }

    &:disabled {
        #oui > .select-background(@oui-input-font-color-disabled);

        border-color: @oui-input-background-color-disabled;
        background-color: @oui-color-concrete;
        color: @oui-input-font-color-disabled;
        text-shadow: none;
        cursor: not-allowed;
    }

    &[multiple] {
        height: auto;
        background-image: none;
    }

    // States
    &.disabled { opacity: 1; }

    .has-success & {
        #oui > .select-variant(@state-success-text; @state-success-bg; @state-success-border);
    }

    .has-warning & {
        #oui > .select-variant(@state-warning-text; @state-warning-bg; @state-warning-border);
    }

    .has-error & {
        #oui > .select-variant(@state-danger-text; @state-danger-bg; @state-danger-border);
    }
}

// Sizing
input.form-control,
textarea.form-control,
select.form-control {
    &.input-lg,
    .form-group-lg & {
        .input-size(@input-height-large; @padding-large-vertical; @oui-input-padding; @font-size-large; @line-height-large; @input-border-radius-large);

        min-height: @input-height-large;
    }

    &.input-sm,
    .form-group-sm & {
        .input-size(@input-height-small; @padding-small-vertical; @oui-input-padding; @font-size-base; @line-height-small; @input-border-radius-small);

        min-height: @input-height-small;
    }
}

// Feedbacks
.form-control-feedback {
    min-width: 50px;
    font-size: @font-size-base;
    color: @oui-color-silver;

    &.oui-icon { font-size: @font-size-large; }
}

.has-feedback {
    label ~ .form-control-feedback { top: calc(16px * 1.5 + 4px); }

    .form-control { padding-right: calc(50px + @oui-input-padding) }

    // Feedback Icon
    #oui > .feedback-variant(@oui-color-silver, @oui-input-border-color-focus);

    &.has-success {
        #oui > .feedback-variant(@oui-color-silver, @state-success-text);
    }

    &.has-warning {
        #oui > .feedback-variant(@oui-color-silver, @state-warning-text);
    }

    &.has-error {
        #oui > .feedback-variant(@oui-color-silver, @state-danger-text);
    }
}

// Feedback states
.has-success {
  .form-control-validation(@state-success-text; @state-success-border; @state-success-bg);
}

.has-warning {
  .form-control-validation(@state-warning-text; @state-warning-border; @state-warning-bg);
}

.has-error {
  .form-control-validation(@state-danger-text; @state-danger-border; @state-danger-bg);
}


// Help text
.help-block {
    font-size: @font-size-base;
    color: @text-color;

    .has-success & { color: @brand-success; }

    .has-warning & { color: @brand-warning; }

    .has-error & { color: @brand-danger; }
}


// Inline Forms
.form-inline {
    label {
        display: inline-block;
        margin-bottom: 0;
        vertical-align: middle;
    }
}

// Horizontal Forms
.form-horizontal {
    .radio,
    .checkbox,
    .radio-inline,
    .checkbox-inline {
        padding-top: @padding-base-vertical;
    }

    .help-block { margin-bottom: 0; }

    @media (min-width: @screen-sm-min) {
        .control-label {
            margin-bottom: 0;
            padding-top: @padding-base-vertical;
        }
    }

    .form-group-lg {
        @media (min-width: @screen-sm-min) {
            .control-label {
                line-height: @line-height-large;
                padding-top: calc(@padding-large-vertical + 1px); // Padding + Border
                font-size: @font-size-large;
            }
        }
    }

    .form-group-sm {
        @media (min-width: @screen-sm-min) {
            .control-label {
                padding-top: calc(@padding-small-vertical + 1px); // Padding + Border
                font-size: @font-size-base;
            }
        }
    }
}

// Mixins
#oui {
    .input-variant(@status-font-color, @status-background-color, @status-border-color) {
        box-shadow: none;

        &:not(:disabled),
        &:not(:disabled):hover,
        &:not(:disabled):active,
        &:not(:disabled):focus {
            font-weight: 400;
            color: @status-font-color;
            border-color: @status-border-color;
            background-color: @status-background-color;
        }

        &:not(:disabled):focus { box-shadow: 0 0 3px 0 rgba(0, 0, 0, .35); }

        &::selection {
            color: #fff;
            background: @status-font-color;
        }

        &::-moz-selection {
            color: #fff;
            background: @status-font-color;
        }

        &::-webkit-selection {
            color: #fff;
            background: @status-font-color;
        }
    }

    .select-background(@color: @oui-icon-color) {
        @fill: escape(@color);

        background-image: url('data:image/svg+xml;utf8,<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"><path fill="@{fill}" d="M32,51.2c-1.7,0-3.3-0.7-4.5-1.9L1.9,23.8c-2.5-2.5-2.5-6.6,0-9.1s6.6-2.5,9.1,0l21,21.1l21-21.1c2.5-2.5,6.6-2.5,9.1,0 c2.5,2.5,2.5,6.6,0,9.1L36.5,49.3C35.3,50.5,33.7,51.2,32,51.2z"/></svg>');
        background-repeat: no-repeat;
        background-position: right @oui-icon-position-right center;
        background-size: @oui-select-icon-size;
    }

    .select-variant(@status-font-color, @status-background-color, @status-border-color) {
        #oui > .select-background(@status-font-color);

        box-shadow: none;

        &:not(:disabled),
        &:not(:disabled):hover,
        &:not(:disabled):active,
        &:not(:disabled):focus {
            font-weight: 400;
            color: @status-font-color;
            border-color: @status-border-color;
            background-color: @status-background-color;
        }

        &:not(:disabled):focus { box-shadow: 0 0 3px 0 rgba(0, 0, 0, .35); }
    }

    .feedback-variant(@feedback-color, @feedback-color-focus) {
        .form-control-feedback { color: @feedback-color; }

        .form-control {
            & ~ .form-control-feedback { color: @feedback-color; }

            &:focus ~ .form-control-feedback { color: @feedback-color-focus; }
        }
    }
}
