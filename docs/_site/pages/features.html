<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <title></title>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <nav class="col-md-3">
                    
<ul>
    
        
        <li>
            <a href="/index.html">Home</a>
        </li>
        
        <li>
            <ul>
                
                    <li>
                        <a href="/index.html#prerequisites">Prerequisites</a>
                    </li>
                
                    <li>
                        <a href="/index.html#usage">Usage</a>
                    </li>
                
                    <li>
                        <a href="/index.html#credits">Credits</a>
                    </li>
                
                    <li>
                        <a href="/index.html#license">License</a>
                    </li>
                
            </ul>
        </li>
        
        
    
        
        <li>
            <a href="/pages/usage.html">Usage</a>
        </li>
        
        <li>
            <ul>
                
                    <li>
                        <a href="/pages/usage.html#overview">Overview</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#quick-start">Quick Start</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#makefile">Makefile</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#loading-the-environment">Loading the environment</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#directory-structure">Directory structure</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#config">Config</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#fresh-install-of-drupal-new-project">Fresh install of Drupal (new project)</a>
                    </li>
                
                    <li>
                        <a href="/pages/usage.html#updating-drupal-core">Updating Drupal Core</a>
                    </li>
                
            </ul>
        </li>
        
        
    
        
        <li>
            <a href="/pages/features.html">Features</a>
        </li>
        
        
    
        
        <li>
            <a href="/pages/tools.html">Tools</a>
        </li>
        
        
    
        
        <li>
            <a href="/pages/troubleshooting.html">Troubleshooting</a>
        </li>
        
        
    
</ul>

                </nav>
                <div class="col-md-9">
                    <h2 id="logs">Logs</h2>

<p>You can access all the containers logs, using these commands:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>drucker
<span class="gp">$ </span>make logs
</code></pre>
</div>

<p>!!! note “”
    You can also check all Drupal logs, inside the admin page <code class="highlighter-rouge">/admin/reports/dblog</code>.</p>

<hr />

<h2 id="multiple-projects">Multiple projects</h2>

<p>You can launch and manage many Drucker instances at the same time. This is usefull when you work on multiple website in parrallel.</p>

<p>For example, if you have 2 projects in 2 differents folders, you can open <strong>2</strong> separated bash, and source the env of each project separately.</p>

<p>To make it works, you need to set differents values inside the <code class="highlighter-rouge">drucker.config</code> of your projects:</p>

<ul>
  <li><code class="highlighter-rouge">PROJECT_NAME</code> and <code class="highlighter-rouge">PROJECT_NAME_PLAIN</code> must have different values for each projects</li>
  <li><code class="highlighter-rouge">PUBLIC_WWW_PORT</code> and <code class="highlighter-rouge">PUBLIC_PMA_PORT</code> must have different ports for each projects</li>
  <li><code class="highlighter-rouge">SUBNET</code> must have different values for each projects: just change the 3rd octet of IP-addresses</li>
</ul>

<p>Example:</p>

<ul>
  <li><strong>project1</strong>:
    <ul>
      <li><code class="highlighter-rouge">PROJECT_NAME=Project1</code> and <code class="highlighter-rouge">PROJECT_NAME_PLAIN=project1</code></li>
      <li><code class="highlighter-rouge">PUBLIC_WWW_PORT=19580</code> and <code class="highlighter-rouge">PUBLIC_PMA_PORT=19581</code></li>
      <li><code class="highlighter-rouge">SUBNET=172.16.1</code></li>
      <li>You can open a <em>separated</em> bash and run <code class="highlighter-rouge">cd &lt;project1&gt;; cd drucker; source load-env; make start</code>.</li>
      <li>-&gt; your website will be accessible with the URL: <code class="highlighter-rouge">http://localhost:19580</code> (and <code class="highlighter-rouge">http://localhost:19581</code>)</li>
    </ul>
  </li>
  <li><strong>project2</strong>:
    <ul>
      <li><code class="highlighter-rouge">PROJECT_NAME=Project2</code> and <code class="highlighter-rouge">PROJECT_NAME_PLAIN=project2</code></li>
      <li><code class="highlighter-rouge">PUBLIC_WWW_PORT=19590</code> and <code class="highlighter-rouge">PUBLIC_PMA_PORT=19591</code></li>
      <li><code class="highlighter-rouge">SUBNET=172.16.2</code></li>
      <li>You can open a <em>separated</em> bash and run <code class="highlighter-rouge">cd &lt;project2&gt;; cd drucker; source load-env; make start</code>.</li>
      <li>-&gt; your website will be accessible with the URL: <code class="highlighter-rouge">http://localhost:19590</code> (and <code class="highlighter-rouge">http://localhost:19591</code>)</li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="backup---full">Backup - Full</h2>

<p>You can create a snapshot of all your Drupal at anytime (files and database), using this command:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>drush archive-dump
</code></pre>
</div>
<p>This command will create a <code class="highlighter-rouge">tar.gz</code> file, that will be stored inside <code class="highlighter-rouge">drucker/docker-runtime/drush-backups</code>.</p>

<p>To restore the full backup, you can use this command:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>drush archive-restore --overwrite /home/www-data/drush-backups/archive-dump/path/to/backup
</code></pre>
</div>
<p>Replace the <code class="highlighter-rouge">path/to/backup</code> by the path of the archive contained inside <code class="highlighter-rouge">drucker/docker-runtime/drush-backups</code>.</p>

<p>!!! danger “”
    This command will overwrite all your current files and database!</p>

<hr />

<h2 id="backup---sql-database-only">Backup - SQL Database only</h2>

<p>You can create a backup of the SQL database only (so, without files), using these commands:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>drucker
<span class="gp">$ </span>make sql-backup
<span class="c"># prompt: enter the name of the backup</span>
</code></pre>
</div>
<p>The backup will be stored inside <code class="highlighter-rouge">drucker/docker-runtime/sql-backups</code>.</p>

<p>You can then restore a backup using these commands:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>drucker
<span class="gp">$ </span>make sql-restore
<span class="c"># prompt: enter the name of the backup to restore</span>
</code></pre>
</div>

<p>!!! note “”
    - You can type <code class="highlighter-rouge">l</code> to list all the available backups.
    - When the backup is restored, you’ll be invited to sanitize the database (recommanded).</p>

<hr />

<h2 id="sql-sanitize">SQL Sanitize</h2>

<p>You can sanitize the current database, using these commands:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>drucker
<span class="gp">$ </span>make sql-sanitize
</code></pre>
</div>

<p>This will reset all password accounts and emails.</p>

<hr />

<h2 id="accessing-containers">Accessing containers</h2>

<p>You can access PHP containers, using the shortcuts:</p>

<ul>
  <li><code class="highlighter-rouge">php</code>: to run a shell inside the PHP container, as current user</li>
  <li><code class="highlighter-rouge">phproot</code>: to run a shell inside the PHP container, as root user (use it with caution!)</li>
</ul>

<hr />

<h2 id="modules-patches">Modules patches</h2>

<p>You can apply patches, using Composer: <a href="https://github.com/drupal-composer/drupal-project#how-can-i-apply-patches-to-downloaded-modules">read this</a>.</p>

<hr />


                </div>
            </div>
        </div>
    </body>
</html>
